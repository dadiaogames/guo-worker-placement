{"version":3,"sources":["icons.js","market.js","skills.js","scorers.js","Game.js","Workplace.js","Card.js","Central.js","Panel.js","InversedTabs.js","Board.js","App.js","serviceWorker.js","index.js"],"names":["food_icons","style","color","guo_icon","src","height","marginRight","MARKET","title","cost","illust","effect","G","ctx","picks","food_type","foods","money","skills","skill","onGet0","onGet1","onGet2","food_cost","onGet3","alert","workers","SKILLS","desc","battlecry","onTurnBegin","market","workplace","action","pay","pay_food","self","exhausted_skills","filter","x","exhausted","random","Shuffle","SCORERS","requirements","score","next","map","get_scorer_desc","scorer","r","push","slice","length","move","d1","d2","idx","cd_idx","card","splice","amount","food","get_score","resources","calc","get_workplace_desc","HP","setup","scorer_deck","skill_deck","scorer_list","skill_list","scorers","prices","i","p","reverse","init_prices","moves","place","total_cost","use_worker","pick","original_deck","includes","use","get_final_score","final_score","ranking","events","endGame","shuffle_decks","times","day","endTurn","turn","onBegin","undefined","Avatar","props","className","onClick","handleClick","display","Workplace","align","Card","border","cardType","selected","VCardRow","cards","Market","Field","deck1","deck2","Panel","data","InversedTabs","onSelect","selectedIndex","margin","width","selections","selection","Board","process_workplace_data","bind","process_deck_data","handle_card_click","enter_next_day","state","central","scorer_list_selected","skill_list_selected","scorer_selected","skill_selected","game_count","deck","this","setState","gameover","reset","centrals","field","home","next_day","lineHeight","_","Object","keys","indexOf","React","Component","App","Client","game","board","debug","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7fce664b.chunk.js","sourcesContent":["import React from 'react';\n\nexport const food_icons = [\n  <span style={{color:\"green\"}}>■</span>,\n  <span style={{color:\"#1e90ff\"}}>■</span>,\n  <span style={{color:\"#e3cf57\"}}>■</span>,\n  <span style={{color:\"red\"}}>■</span>,\n];\n\nexport const guo_icon = <img\n  src = \"https://s1.ax1x.com/2020/08/12/axkB28.png\"\n  style = {{height: \"1.25em\", marginRight: \"0.05em\"}}\n/>;","import React from 'react';\nimport { food_icons } from './icons';\nexport const RULES = `游戏目标: 在7天内获得尽可能多的分数\n在你的回合，可以放置郭老师，并做以下事情:\n* 拿取食物: 支付食物价格并拿取1个相应食物，拿取\"红心火龙果\"时需要支付1个食物(猕猴桃或蓝莓)\n* 拿取发展卡: 技能卡和得分卡统称为发展卡，双击想要拿取的发展卡以获得之，拿取技能卡时，需要支付其费用\n放置郭老师时，如果该位置上已经有郭老师，则需要花2块钱/每个郭老师才能再次放置\n7天结束后进入算分，最终得分仅和拥有的得分卡有关\n策略提示:\n* 食物的价格每回合都会变，如果当前觉得太贵，可以之后再买\n* 得分卡的效果是叠加的，所以当你对某种食物的获取能力很强时，要多拿该食物的得分卡\n* 权衡好得分卡和食物的数量是得高分的关键，得分卡过少会导致分数不够，得分卡过多会导致食物不够\n* 游戏开始时，有2次免费拿取发展卡的机会(拿取技能卡时仍要支付费用)`;\n\nexport const MARKET = [ \n  {\n    title: <span>拿1张发展卡</span>,\n    cost: 0,\n    illust: \"https://s1.ax1x.com/2020/08/13/axTt8P.png\",\n    effect(G, ctx) {\n      G.picks += 1;\n    }\n  },\n  {\n    title: <span>{food_icons[0]}迷hotel</span>,\n    cost: -1,\n    food_type: 0,\n    illust: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1597244405843&di=661d6e6add618fbeb6a529c1dede9e86&imgtype=0&src=http%3A%2F%2Fxs3.op.xywy.com%2Fapi.iu1.xywy.com%2Fcms%2F20170420%2F25751936b78f17285f47411819a413f835689.png\",\n    effect(G, ctx) {\n      G.foods[0] += 1;\n      G.money += 1;\n      for (let skill of G.skills) {\n        if (skill.onGet0) {\n          skill.onGet0(G, ctx); // EH: reconstruct this to Game, if there's a food type, onGet${food_type}\n        }\n      }\n    }\n  },\n  {\n    title: <span>{food_icons[1]}蓝莓</span>,\n    cost: 0,\n    food_type: 1,\n    illust: \"https://dss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1071612663,2479903029&fm=26&gp=0.jpg\",\n    effect(G, ctx) {\n      G.foods[1] += 1;\n      for (let skill of G.skills) {\n        if (skill.onGet1) {\n          skill.onGet1(G, ctx);\n        }\n      }\n    }\n  },\n  {\n    title: <span>{food_icons[2]}新居</span>,\n    cost: 1,\n    food_type: 2,\n    illust: \"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1121089958,3018372729&fm=26&gp=0.jpg\",\n    effect(G, ctx) {\n      G.foods[2] += 1;\n      for (let skill of G.skills) {\n        if (skill.onGet2) {\n          skill.onGet2(G, ctx);\n        }\n      }\n    }\n  },\n  {\n    title: <span>{food_icons[3]}红心火龙果</span>,\n    cost: 1,\n    food_cost: 0,\n    food_type: 3,\n    illust: \"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3576916985,1409439418&fm=26&gp=0.jpg\",\n    effect(G, ctx) {\n      G.foods[3] += 1;\n      for (let skill of G.skills) {\n        if (skill.onGet3) {\n          skill.onGet3(G, ctx);\n        }\n      }\n    }\n  },\n  {\n    title: <span>{food_icons[3]}红心火龙果</span>,\n    cost: 0,\n    food_cost: 1,\n    food_type: 3,\n    illust: \"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3576916985,1409439418&fm=26&gp=0.jpg\",\n    effect(G, ctx) {\n      G.foods[3] += 1;\n      for (let skill of G.skills) {\n        if (skill.onGet3) {\n          skill.onGet3(G, ctx);\n        }\n      }\n    }\n  }, \n  {\n    title: <span>获得$3</span>,\n    cost: 0,\n    illust: \"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3216805947,683070568&fm=26&gp=0.jpg\",\n    effect(G, ctx) {\n      G.money += 3;\n    }\n  },\n \n  {\n    title: <span>玩法教学</span>,\n    cost: 0,\n    illust: \"https://dss1.bdstatic.com/6OF1bjeh1BF3odCf/it/u=3629808948,78649414&fm=74&app=80&f=JPEG&size=f121,140?sec=1880279984&t=ae4e8d4cabd5bfd5a0de0ed5b219a9cc\",\n    effect(G, ctx) {\n      alert(RULES);\n      G.workers += 1;\n    }\n  },\n \n];","import React from 'react';\nimport { pay, pay_food } from './Game';\nimport { food_icons, guo_icon } from './icons';\n\nexport const SKILLS = [\n  {desc: <span>拿取{food_icons[0]}时，额外获得1{food_icons[0]}</span>,\n  cost: 1,\n  onGet0(G, ctx) {\n    G.foods[0] += 1;\n  },},\n  {desc: <span>拿取{food_icons[1]}时，额外获得1{food_icons[1]}</span>,\n  cost: 1,\n  onGet1(G, ctx) {\n    G.foods[1] += 1;\n  },},\n  {desc: <span>拿取{food_icons[2]}时，价格-2$</span>,\n  cost: 1,\n  battlecry: true,\n  onTurnBegin(G, ctx) {\n    for (let workplace of G.market) {\n      if (workplace.food_type == 2) {\n        workplace.cost -= 2;\n      }\n    }\n  },},\n  {desc: <span>拿取{food_icons[3]}时，无需支付食材</span>,\n  cost: 1,\n  battlecry: true,\n  onTurnBegin(G, ctx) {\n    for (let workplace of G.market) {\n      if (workplace.food_type == 3) {\n        workplace.food_cost = -1;\n      }\n    }\n  },},\n  {desc: <span>拿取{food_icons[0]}时，获得$2</span>,\n  cost: 1,\n  onGet0(G, ctx) {\n    G.money += 2;\n  },},\n  {desc: <span>拿取{food_icons[1]}时，获得$2</span>,\n  cost: 1,\n  onGet1(G, ctx) {\n    G.money += 2;\n  },},\n  {desc: <span>拿取{food_icons[2]}时，获得{guo_icon}</span>,\n  cost: 1,\n  onGet2(G, ctx) {\n    G.workers += 1;\n  },},\n  {desc: <span>拿取{food_icons[3]}时，可拿取1张发展卡</span>,\n  cost: 4,\n  onGet3(G, ctx) {\n    G.picks += 1;\n  },},\n  {desc: <span>行动: $2→{food_icons[0]}+{food_icons[0]}</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay(G, ctx, 2)) {\n      G.foods[0] += 2;\n    }\n  },},\n  {desc: <span>行动: $1→{food_icons[1]}</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay(G, ctx, 1)) {\n      G.foods[1] += 1;\n    }\n  },},\n  {desc: <span>行动: $2→{food_icons[2]}</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay(G, ctx, 2)) {\n      G.foods[2] += 1;\n    }\n  },},\n  {desc: <span>行动: $3→{food_icons[3]}</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay(G, ctx, 3)) {\n      G.foods[3] += 1;\n    }\n  },},\n  {desc: <span>行动: {food_icons[0]}→$4</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay_food(G, ctx, 0)) {\n      G.money += 4;\n    }\n  },},\n  {desc: <span>行动: {food_icons[1]}→$5</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay_food(G, ctx, 1)) {\n      G.money += 5;\n    }\n\n  },},\n  {desc: <span>行动: {food_icons[2]}→$6</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay_food(G, ctx, 2)) {\n      G.money += 6;\n    }\n\n  },},\n  {desc: <span>行动: {food_icons[3]}→$7</span>,\n  cost: 1,\n  action(G, ctx) {\n    if (pay_food(G, ctx, 3)) {\n      G.money += 7;\n    }\n\n  },},\n  {desc: <span>回合开始时，获得1{food_icons[0]}</span>,\n  cost: 1,\n  onTurnBegin(G, ctx) {\n    G.foods[0] += 1;\n\n  },},\n  {desc: <span>回合开始时，获得1{food_icons[1]}</span>,\n  cost: 3,\n  onTurnBegin(G, ctx) {\n    G.foods[1] += 1;\n\n  },},\n  {desc: <span>回合开始时，获得1{food_icons[2]}</span>,\n  cost: 4,\n  onTurnBegin(G, ctx) {\n    G.foods[2] += 1;\n\n  },},\n  {desc: <span>回合开始时，获得1{food_icons[3]}</span>,\n  cost: 6,\n  onTurnBegin(G, ctx) {\n    G.foods[3] += 1;\n\n  },},\n  {desc: <span>回合开始时，获得$2</span>,\n  cost: 1,\n  onTurnBegin(G, ctx) {\n    G.money += 2;\n\n  },},\n\n  {\n    desc: <span>行动: 重置1张技能卡</span>,\n    cost: 1,\n    action(G, ctx, self) {\n      let exhausted_skills = G.skills.filter(x => (x.exhausted && x!=self));\n      let skill = ctx.random.Shuffle(exhausted_skills)[0];\n      if (skill) {\n        skill.exhausted = false;\n      }\n    },\n  },\n  \n  {\n    desc: <span>行动: 获得{guo_icon}</span>,\n    cost: 1,\n    action(G, ctx, self) {\n      G.workers += 1;\n    },\n  },\n\n  {\n    desc: <span>行动: $2→拿1张发展卡</span>,\n    cost: 1,\n    action(G, ctx, self) {\n      if (pay(G, ctx, 2)) {\n        G.picks += 1;\n      }\n    },\n  },\n];","import React from 'react';\nimport { food_icons } from './icons';\n\nexport const scorers_raw = [\n  {requirements:[0], score:1,},\n  {requirements:[1,-1], score:2,},\n  {requirements:[2], score:2,},\n  {requirements:[3,-1], score:3,},\n  {requirements:[0,0], score:2,},\n  {requirements:[1,1], score:3,},\n  {requirements:[2,2], score:4,},\n  {requirements:[3,3], score:5,},\n  {requirements:[0,1], score:3,},\n  {requirements:[1,2], score:4,},\n  {requirements:[2,3], score:5,},\n  {requirements:[0,3], score:4,},\n  {requirements:[0,2], score:3,},\n  {requirements:[1,3], score:4,},\n  {requirements:[0],  score:2, next: {requirements:[3],score:-3,},},\n  {requirements:[1],  score:3, next: {requirements:[0],score:-1,},},\n  {requirements:[2],  score:4, next: {requirements:[1],score:-1,},},\n  {requirements:[3],  score:5, next: {requirements:[2],score:-2,},},\n  {requirements:[0,1,2,3], score:9,},\n  {requirements:[-2], score:1,},\n  {requirements:[-5], score:3 ,},\n];\n\nfunction get_scorer_desc(scorer) {\n  let desc = [];\n  for (let r of scorer.requirements) {\n    if (r >= 0) {\n      desc.push(food_icons[r]);\n    }\n    else {\n      desc.push(`\\$${-r}`)\n    }\n    desc.push(\" + \");\n  }\n  desc = desc.slice(0, desc.length-1);\n  desc.push(` = ${scorer.score}分`);\n\n  if (scorer.next) {\n    desc = [...desc, <br/>, ...get_scorer_desc(scorer.next).desc];\n  }\n\n  scorer.desc = desc;\n  return scorer;\n}\n\nexport const SCORERS = scorers_raw.map(get_scorer_desc);","import React from 'react';\nimport { food_icons } from './icons';\nimport { MARKET } from './market';\nimport { SKILLS } from './skills';\nimport { SCORERS } from './scorers';\n\nexport function move(G, ctx, d1, d2, idx) {\n  let cd_idx = idx || 0;\n  let card = G[d1].splice(cd_idx, 1)[0];\n  G[d2].push(card);\n  return card;\n}\n\nfunction init_prices() {\n  let prices = [];\n  for(let i=0; i<4; i++) {\n    prices.push([i, i+1, i+2, i+3].map(i => i%4));\n  }\n  return [...prices, ...prices.map(p => p.reverse())];\n}\n\nfunction setup(ctx) {\n  const G = {};\n\n  G.foods = [0, 0, 0, 0];\n  G.money = 3;\n  G.workers = 3;\n\n  G.day = 0;\n\n  G.scorer_deck = [...SCORERS, ...SCORERS].map(x=>({...x}));\n  G.skill_deck = [...SKILLS, ...SKILLS].map(x=>({...x}));\n  G.scorer_deck = ctx.random.Shuffle(G.scorer_deck);\n  G.skill_deck = ctx.random.Shuffle(G.skill_deck);\n\n  G.scorer_list = [];\n  G.skill_list = [];\n  G.scorers = [];\n  G.skills = [];\n\n  G.market = []; // This is not set in setup\n\n  G.prices = ctx.random.Shuffle(init_prices());\n\n  G.picks = 0;\n\n  return G;\n}\n\nfunction shuffle_decks(G, ctx, times) {\n  for (let i=0; i<times; i++) {\n    G.scorer_deck = ctx.random.Shuffle(G.scorer_deck);\n    G.skill_deck = ctx.random.Shuffle(G.skill_deck);\n    G.prices = ctx.random.Shuffle(G.prices);\n  }\n  // EH: reconstruct this part\n  // If a shuffle function is at the outside, then the \"onBegin\" of the turn should be changed by adding stages\n  // However, if game is jumped into via \"start_game\", this is not a problem, if game is jumped into right after the page is loaded, this is a problem\n  G.day -= 1;\n  G.money -= 2;\n  ctx.events.endTurn();\n}\n\nexport function pay(G, ctx, amount) {\n  if (G.money >= amount) {\n    G.money -= amount;\n    return true;\n  }\n  else {\n    return false\n  }\n}\n\nfunction use_worker(G, ctx, workplace) {\n  if (G.workers > 0) {\n    G.workers -= 1;\n    workplace.workers += 1;\n    return true;\n  }\n  else {\n    return false;\n  }\n}\n\nexport function pay_food(G, ctx, food) {\n  // Usually, only cost 1 food\n  if (G.foods[food] > 0) {\n    G.foods[food] -= 1;\n    return true;\n  }\n  else {\n    return false;\n  }\n}\n\nfunction place(G, ctx, idx) {\n  let workplace = G.market[idx];\n\n  let total_cost = workplace.cost + 2 * workplace.workers;\n  if (use_worker(G, ctx, workplace) && pay(G, ctx, total_cost)) {\n    if (workplace.food_cost >= 0) {\n      let food_paid = pay_food(G, ctx, workplace.food_cost);\n      if (!food_paid) {\n        return;\n      }\n    }\n\n    workplace.effect(G, ctx);\n  }\n}\n\nexport function get_score(scorer, resources) {\n  let calc = [...resources];\n  // The scorer.requirements and resources cannot be empty, and r cannot be larger than the len of calc or return values after each call are the same\n\n  for (let r of scorer.requirements) {\n    if (r >= 0) {\n      calc[r] -= 1;\n    }\n    else {\n      calc[4] += r;  // it's reducing the amount of money required\n    }\n  }\n\n  for (let c of calc) {\n    if (c < 0) {\n      return 0;\n    }\n  }\n\n  // \"Next\" is not calculated here, this function is for single scorer\n  return scorer.score + get_score(scorer, calc);\n}\n\nfunction get_final_score(G, ctx) {\n  let score = 0;\n  let resources = [...G.foods, G.money];\n  for (let scorer of G.scorers) {\n    score += get_score(scorer, resources);\n    if (scorer.next) {\n      score += get_score(scorer.next, resources);\n    }\n  }\n\n  G.final_score = score;\n  G.ranking = \"D\";\n  if (score >= 0 && score < 30) {\n    G.ranking = \"C\";\n  }\n  else if (score >= 30 && score < 50) {\n    G.ranking = \"B\";\n  }\n  else if (score >= 50 && score < 100) {\n    G.ranking = \"A\";\n  }\n  else if (score >= 100 && score < 200) {\n    G.ranking = \"S\";\n  }\n  else if (score >= 200 && score < 300) {\n    G.ranking = \"SS\";\n  }\n  else {\n    G.ranking = \"SSS\";\n  }\n\n  ctx.events.endGame();\n}\n\nfunction pick(G, ctx, original_deck, idx) {\n  if (G.picks > 0) {\n    if (original_deck.includes(\"scorer\")) {\n      move(G, ctx, \"scorer_list\", \"scorers\", idx);\n    }\n    else if (original_deck.includes(\"skill\")) {\n      let skill = G.skill_list[idx];\n      if (pay(G, ctx, skill.cost)) {\n        move(G, ctx, \"skill_list\", \"skills\", idx);\n        if (skill.onTurnBegin && skill.battlecry) {\n          skill.onTurnBegin(G, ctx, skill);\n        }\n      }\n    }\n\n    G.picks -= 1;\n    // TODO: display picks\n  }\n}\n\nfunction use(G, ctx, idx) {\n  let skill = G.skills[idx];\n  if (!skill.exhausted) {\n    skill.action(G, ctx, skill);\n    skill.exhausted = true;\n  }\n}\n\nexport function get_workplace_desc(workplace) {\n  // No need the util function \"process_workplace_data\", do this on turn begin\n  // What's more, (workplace.food_cost)? will return false with zero\n  // >=0 also treats -1 better\n  return <span>\n    ${workplace.cost} &nbsp;\n    {(workplace.food_cost >= 0)? food_icons[workplace.food_cost] : \"\"}\n  </span>;\n}\n\nexport const HP = {\n  setup: setup,\n  moves: {\n    place,\n    pick,\n    use,\n    get_final_score,\n    shuffle_decks,\n  },\n  turn: {\n    onBegin(G, ctx) {\n      // Update data\n      G.day += 1;\n      G.workers = 3;\n      G.money += 2;\n      G.picks = 0;\n\n      // If it's first day\n      if (G.day == 1) {\n        G.picks += 2;\n      }\n\n      // Setup market\n      G.market = MARKET.map(x => ({...x}));\n      for (let workplace of G.market) {\n        workplace.workers = 0;\n\n        if (workplace.food_type != undefined) { // Once again, \"if 0\" returns false, or if a number is required, use \"!= undefined\"\n          workplace.cost += G.prices[G.day][workplace.food_type];\n        }\n      }\n\n      // Refresh cards\n      G.scorer_list = [];\n      G.skill_list = [];\n      for (let i=0; i<4; i++) {\n        move(G, ctx, \"scorer_deck\", \"scorer_list\", 0);\n        move(G, ctx, \"skill_deck\", \"skill_list\", 0);\n        // TODO: add discard\n      }\n\n      // On turn begin and refresh skills\n      for (let skill of G.skills) {\n        skill.exhausted = false;\n        if (skill.onTurnBegin) {\n          skill.onTurnBegin(G, ctx, skill);\n        }\n      }\n    },\n  }\n};","import React from 'react';\n\nimport './Workplace.css';\n\nconst Avatar = (props) => (\n  <div className=\"avatar\" onClick={props.handleClick}>\n    <span \n      className = \"avatar-alt\"\n      style = {{display: ((props.workers > 0)? \"none\":\"\")}}\n    >\n      可放置\n    </span>\n    <img \n      src = \"https://s1.ax1x.com/2020/08/12/axkB28.png\"\n      className = \"avatar-img\"\n      style = {{display: ((props.workers > 0)? \"\":\"none\")}}\n    />\n    <span\n      className = \"num-workers\"\n      style = {{display: ((props.workers >= 2)? \"\":\"none\")}}\n    >\n      {props.workers}\n    </span>\n  </div>\n);\n\nexport const Workplace = (props) => (\n  <div className=\"workplace\">\n    <Avatar \n      handleClick = {props.handleClick} \n      workers = {props.workers}\n    />\n    <div className=\"desc\" align=\"center\">\n      {props.title}<br/><br/>\n      {props.desc}\n    </div>\n    <div className=\"illust-container\">\n      <img \n        src = {props.illust}\n        className = \"illust\"\n      />\n    </div>\n  </div>\n);","import React from 'react';\n\nimport './Card.css';\n\n// Maybe all styles should be processed in container, not at here\n// Or some styles are fixed, so let props be at higher level?\nexport const Card = (props) => {\n  let border = \"3px solid\";\n\n  if (props.cardType == \"scorer\") {\n    border = \"3px solid rgb(229,131,8)\";\n  }\n  else if (props.cardType == \"skill\") {\n    border = \"3px solid rgb(137,207,240)\";\n  }\n\n  if (props.selected) {\n    border = \"4px solid green\";\n  }\n\n  if (props.exhausted) {\n    border = \"2px solid red\";\n  }\n\n  // EH: Let cost float like data\n  return (<div \n    className = \"card\" \n    style = {{\n      border: border,\n    }}\n    onClick = {props.handleClick}\n    align = \"center\"\n  >\n    {props.cost? `(\\$${props.cost})` : \"\"}\n    <br/>\n    {props.desc}\n  </div>);\n};\n\nexport const VCardRow = (props) => (<div className=\"vcard-row\" >\n  {props.cards.map((card, idx) => (\n    <Card\n      {...card}\n    />\n  ))}\n</div>);\n","import React from 'react';\nimport { Workplace } from './Workplace';\nimport { VCardRow } from './Card';\n\nimport './Central.css';\n\nexport const Market = (props) => (\n  <div className=\"central market\" >\n    {props.market.map(workplace => <Workplace {...workplace}/>)}\n  </div>\n);\n\nexport const Field = (props) => (\n  <div className=\"central\" >\n    <VCardRow cards={props.deck1} />\n    <VCardRow cards={props.deck2} />\n  </div>\n);","import React from 'react';\nimport './Panel.css';\n\nexport const Panel = (props) => (\n  <div className=\"panel\" align=\"center\">\n    {props.data}\n  </div>\n);","import React from 'react';\nimport { Tabs, TabList, Tab } from 'react-tabs';\n\nimport './InversedTabs.css';\n\nexport const InversedTabs = (props) => (\n  <Tabs\n    onSelect = {props.onSelect}\n    selectedIndex = {props.selectedIndex}\n    style={{margin: \"2%\", width: \"75%\", display: \"inline-block\"}}\n  >\n    <TabList>\n      {props.selections.map(selection => <Tab>{selection}</Tab>)}\n    </TabList>\n  </Tabs>\n);","import React from 'react';\nimport _ from 'lodash';\nimport { get_workplace_desc } from './Game';\nimport { Market, Field } from './Central';\nimport { Panel } from './Panel';\nimport { InversedTabs } from './InversedTabs';\nimport { food_icons, guo_icon } from './icons';\n\nimport './Board.css';\n\nexport class Board extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.process_workplace_data = this.process_workplace_data.bind(this);\n    this.process_deck_data = this.process_deck_data.bind(this);\n    this.handle_card_click = this.handle_card_click.bind(this);\n\n    this.enter_next_day = this.enter_next_day.bind(this);\n\n    this.state = {\n      central: \"market\",\n\n      scorer_list_selected: -1,\n      skill_list_selected: -1,\n      scorer_selected: -1,\n      skill_selected: -1,\n\n      game_count: 0,\n    }\n  }\n\n  process_workplace_data(workplace, idx) {\n    return {\n      desc: get_workplace_desc(workplace),\n      handleClick: () => (this.props.moves.place(idx)),\n      ...workplace,\n    };\n  }\n\n  process_deck_data(deck) {\n    return this.props.G[deck].map((card, idx) => ({\n      cardType: (deck.includes(\"scorer\"))? \"scorer\" : \"skill\",\n      selected: (this.state[deck+\"_selected\"] == idx),\n      handleClick: this.handle_card_click(deck, idx),\n      ...card,\n    }));\n  }\n\n  handle_card_click(deck, idx) {\n    return () => {\n      let current_selected = this.state[deck+\"_selected\"];\n      if (current_selected != idx) {\n        this.setState({[deck+\"_selected\"]: idx});\n      }\n      else {\n        if (deck.includes(\"list\")) {\n          // pick card\n          this.props.moves.pick(deck, idx);\n        }\n        else {\n          // use card\n          this.props.moves.use(idx);\n        }\n        this.setState({[deck+\"_selected\"]: -1});\n      }\n    }\n  }\n  componentDidUpdate(){    \n    if (this.props.ctx.gameover) {\n      alert(`最终得分: ${this.props.G.final_score}\\n评级: ${this.props.G.ranking}`);\n      this.props.reset();\n      this.props.moves.shuffle_decks(this.state.game_count+1);\n      this.setState({game_count: this.state.game_count+1});\n    }\n  }\n  enter_next_day() {\n    if (this.props.G.day < 7) {\n      this.props.events.endTurn();\n    }\n    else {\n      this.props.moves.get_final_score();\n    }\n  }\n\n  render() {\n    let market = <Market \n      market = {this.props.G.market.map(this.process_workplace_data)}\n    />;\n    let field = <Field \n      deck1 = {this.process_deck_data(\"scorer_list\")}\n      deck2 = {this.process_deck_data(\"skill_list\")}\n    />;\n    let home = <Field\n      deck1 = {this.process_deck_data(\"scorers\")}\n      deck2 = {this.process_deck_data(\"skills\")}\n    />;\n    let centrals = {market, field, home};  // EH: Reconstruct this, all selectors should use list instead of object \n    let next_day = \"下一天\";\n    if (this.props.G.day >= 7) {\n      next_day = \"算分\";\n    }\n    return <div className=\"board\">\n      <Panel \n        data = {\n          <span style={{lineHeight:\"250%\"}}>\n            第{this.props.G.day}/7天 &nbsp;&nbsp;&nbsp;\n            {_.times(this.props.G.workers, ()=>(guo_icon))} &nbsp;&nbsp;&nbsp;\n            👌: {this.props.G.picks}\n          </span>\n        }\n      />\n      {centrals[this.state.central]}\n      <InversedTabs \n        selections = {[\"市场\", \"拿卡区\", \"我的卡\"]}\n        onSelect = {(idx) => {this.setState({central: Object.keys(centrals)[idx]})}}\n        selectedIndex = {Object.keys(centrals).indexOf(this.state.central)}\n      />\n      <button \n        className = \"next-day-button\"\n        onClick = {this.enter_next_day}\n      >\n        {next_day}\n      </button>\n      <Panel \n        data = {\n          <span style={{lineHeight:\"225%\"}} >\n            {food_icons[0]}:{this.props.G.foods[0]} &nbsp;&nbsp;\n            {food_icons[1]}:{this.props.G.foods[1]} &nbsp;&nbsp;\n            {food_icons[2]}:{this.props.G.foods[2]} &nbsp;&nbsp;\n            {food_icons[3]}:{this.props.G.foods[3]} &nbsp;&nbsp;\n            $:{this.props.G.money}\n          </span>\n        }\n      />\n    </div>\n  }\n}","import { Client } from 'boardgame.io/react';\nimport { HP } from './Game';\nimport { Board } from './Board';\n\n// import 'antd/dist/antd.css';\n\nconst App = Client({ \n  game: HP, \n  board: Board,\n  debug: false,\n});\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA"],"sourceRoot":""}